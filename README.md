# UtilitiesBot

Это бот для Телеграма, который упрощает подсчет суммы к уплате по счетчикам воды и электричества.

## Описание
Бот сохраняет показания и тарифы в базе данных. Для первоначального расчета нужно сохранить два набора показаний и
действующие тарифы. После этого будет доступен расчет как разница между этими двумя наборами, умноженная на
соответствующие тарифы. Поскольку информация сохраняется в базе данных, для последующих подсчетов нужно будет вводить
только новые показания. Бот сам подтянет предыдущие сохраненные показания и тарифы и посчитает сумму.

Для идентификации бот использует ID чата. Поэтому вы можете создать несколько чатов для сохранения показаний для разных
помещений, а также добавить других пользователей в чат, чтобы они могли добавлять новые показания или считать сумму.

Сейчас бот настроен для работы с тремя тарифами электричества, холодной и горячей водой. Если у вас однотарифный
счетчик электричества или вам не нужен расчет для воды, сохраняйте нулевые значения. Для разделения значений
используйте точку с запятой.

## Использование

### Вариант 1. Я просто хочу передавать показания и получать сумму.
Бот доступен в Телеграм по ссылке [t.me/kotUtilitiesBot](https://t.me/kotUtilitiesBot)

### Вариант 2. Я хочу развернуть своего бота.
Для этого выполните следующие шаги:
1. Зарегистрируйте своего бота в [BotFather](https://t.me/BotFather).
2. Установите на компьютер, где хотите запустить своего бота, [Docker](https://www.docker.com).
3. Скачайте на этот компьютер архив с необходимыми файлами из [релиза](https://github.com/MaxKostyuk/UtilitiesBot/releases/).
4. Пропишите в файле `docker-compose.yml` параметры `BOT_NAME` и `BOT_TOKEN`. Также рекомендуется обновить переменные
   `POSTGRES_USER` и `DB_USER` (должны иметь одинаковые значения) и `POSTGRES_PASSWORD` и `DB_PASSWORD` (также должны иметь
   одинаковые значения).
5. Запустите с помощью Docker `docker-compose` файл.
6. Наслаждайтесь!

## Конфиденциальность
Бот сохраняет только те показания и тарифы, что вы передали ему. Для идентификации используется ID чата. Никакая другая
информация не сохраняется.

## Будущие планы
- Добавить распознавание показаний с фотографий счетчиков.
- Добавить более подробный отчет о подсчете суммы к уплате, включая детализацию по каждому параметру.
- Добавить к расчетам оплату газа.
- Добавить обработку текстовых показаний с разными разделителями.
- Добавить возможность удаления всех сохраненных данных для чата.

## Стек технологий
Проект разрабатывался на Java версии 21 с использованием Spring. Для хранения информации используется БД PostgreSQL.
Для развертывания используется Docker.
